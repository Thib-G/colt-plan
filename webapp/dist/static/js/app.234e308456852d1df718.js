webpackJsonp([1],{"1/oy":function(t,e){},"9M+g":function(t,e){},Id91:function(t,e){},Jmt5:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("SCKt"),n("SuHP"),n("qbO9"),n("fB7P"),n("Jmt5"),n("9M+g");var a=n("7+uW"),r=n("e6fC"),s=(n("eFZR"),{render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"dark",sticky:!0}},[n("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),t._v(" "),n("b-navbar-brand",{attrs:{to:"/"}},[t._v("\n        CoLT Viz\n    ")]),t._v(" "),n("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item-dropdown",{attrs:{right:""}},[n("template",{slot:"button-content"},[n("em",[t._v("User")])]),t._v(" "),n("b-dropdown-item",{attrs:{href:"#"}},[t._v("Profile")]),t._v(" "),n("b-dropdown-item",{attrs:{href:"#"}},[t._v("Signout")])],2)],1)],1)],1)},staticRenderFns:[]});var i={name:"App",components:{"navbar-top":n("VU/8")(null,s,!1,function(t){n("Tjb/")},"data-v-cf123ea6",null).exports}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("navbar-top"),this._v(" "),e("div",{attrs:{id:"app"}},[e("router-view")],1)],1)},staticRenderFns:[]};var l=n("VU/8")(i,o,!1,function(t){n("gj1u")},null,null).exports,c=n("/ocq"),m=n("mtWM"),d=n.n(m),u="http://localhost:5000/graphql",p={getTasksByTemplateId:function(t){var e={templateId:t};return d.a.post(u,{query:"\n      query taskQuery($templateId: Int)\n      {\n        allTasks(\n          condition: {\n            templateId: $templateId\n          }\n          orderBy: ORDER_NR_ASC\n        ) {\n          nodes {\n            rowId\n            templateId\n            orderNr\n            taskDescr\n            yrBefore\n            activityType\n            resmgrId\n          }\n        }\n      }\n    ",variables:e}).then(function(t){return t.data.data.allTasks.nodes})},getAllProjects:function(){return d.a.post(u,{query:"\n      {\n        allStartDates {\n          nodes {\n            id: rowId\n            projectDescr\n            startDate\n          }\n        }\n      }\n    "}).then(function(t){return t.data.data.allStartDates.nodes})},getTasksByProjectId:function(t){var e={projectId:t};return d.a.post(u,{query:"\n      query tasksByProjectId($projectId: Int)\n      {\n        allStartDates (\n          condition: {\n            rowId: $projectId\n          }\n        ) {\n          nodes {\n            id: rowId\n            projectDescr\n            startDate\n            templateId\n            templateByTemplateId {\n              id: rowId\n              descr\n              tasksByTemplateId {\n                nodes {\n                  id: rowId\n                  templateId\n                  orderNr\n                  taskDescr\n                  yrBefore\n                  activityType\n                }\n              }\n            }\n          }\n        }\n      }\n    ",variables:e}).then(function(t){return t.data.data.allStartDates.nodes[0]})}},h=n("Gu7T"),f=n.n(h),v=n("9j4o"),g=n("Q1TF"),_=n("mvUh"),y={select:v.a,selectAll:v.b,scaleLinear:g.a,scaleTime:g.c,scaleOrdinal:g.b,schemeCategory10:g.d,axisTop:_.a},D={props:["items","isTemplate","doneItems"],data:function(){return{lineHeight:30,leftColumn:300,width:800,margin:{top:40,bottom:40,left:20,right:20}}},computed:{height:function(){return this.lineHeight*this.items.length},scale:function(){if(this.isTemplate)return{x:y.scaleLinear().rangeRound([0,this.width-this.leftColumn-this.margin.left-this.margin.right]).domain([-5,0])};var t=this.items.map(function(t){return t.calculatedDate});return{x:y.scaleTime().rangeRound([0,this.width-this.leftColumn-this.margin.left-this.margin.right]).domain([Math.min.apply(Math,f()(t)),Math.max.apply(Math,f()(t))])}},scaleColor:function(){var t=this.items.map(function(t){return t.activityType});return{fill:y.scaleOrdinal(y.schemeCategory10).domain(t)}}},watch:{scale:function(){y.select(this.$refs.gridlines).call(y.axisTop(this.scale.x).tickSize(-this.height))}},methods:{formatDate:function(t){return t.toLocaleString()},setDone:function(t){this.$emit("onSetDone",t)},isDone:function(t){return this.doneItems.includes(t)}}},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:t.width+t.margin.left+t.margin.right,height:t.height+t.margin.top+t.margin.bottom}},[n("g",{staticClass:"content",attrs:{transform:"translate("+t.margin.left+", "+t.margin.top+")"}},[t._l(t.items,function(e,a){return[n("g",{key:e.rowId,staticClass:"pointer",class:{done:t.isDone(e)},attrs:{transform:"translate(0, "+t.lineHeight*a+")"},on:{click:function(n){t.setDone(e)}}},[n("g",[n("text",{staticClass:"task",attrs:{fill:t.scaleColor.fill(e.activityType),x:t.leftColumn-2,y:t.lineHeight-10}},[t._v("\n            "+t._s(e.orderNr)+" "+t._s(e.taskDescr)+"\n          ")])]),t._v(" "),n("g",{attrs:{transform:"translate("+t.leftColumn+", 0)"}},[n("rect",{staticClass:"task",attrs:{x:"0",y:"0",height:t.lineHeight-1,width:t.width-t.leftColumn}}),t._v(" "),n("line",{staticClass:"callout",attrs:{x1:5,y1:t.lineHeight/2,x2:t.margin.left+t.scale.x(t.isTemplate?-e.yrBefore:e.calculatedDate),y2:t.lineHeight/2}}),t._v(" "),n("circle",{staticClass:"milestone",attrs:{r:"5",cx:t.margin.left+t.scale.x(t.isTemplate?-e.yrBefore:e.calculatedDate),cy:t.lineHeight/2,fill:t.scaleColor.fill(e.activityType)}},[e.calculatedDate?n("title",[t._v(t._s(t.formatDate(e.calculatedDate)))]):t._e()]),t._v(" "),e.calculatedDate?n("text",{staticClass:"dateText",attrs:{x:t.margin.left+10+t.scale.x(e.calculatedDate),y:"20"}},[t._v("\n            "+t._s(t.formatDate(e.calculatedDate))+"\n          ")]):t._e()])])]}),t._v(" "),t.items.length>0?n("g",{attrs:{transform:"translate("+t.leftColumn+", 0)"}},[n("line",{staticClass:"today",attrs:{x1:t.scale.x(new Date),x2:t.scale.x(new Date),y1:0,y2:t.height}})]):t._e()],2),t._v(" "),n("g",{attrs:{transform:"translate("+(t.margin.left+t.leftColumn)+", "+t.margin.top+")"}},[n("g",{ref:"gridlines",staticClass:"gridlines"})]),t._v(" "),n("g",{staticClass:"legend",attrs:{transform:"translate(\n        "+(t.width+t.margin.left+t.margin.right-50*t.scaleColor.fill.domain().length)/2+",\n        "+(t.margin.top+t.lineHeight*t.items.length)+"\n      )"}},[t._l(t.scaleColor.fill.domain(),function(e,a){return[n("g",{key:a,attrs:{transform:"translate("+50*a+", "+(t.margin.bottom-20)+")"}},[n("circle",{attrs:{cx:"5",cy:"0",r:"4",fill:t.scaleColor.fill(e)}}),t._v(" "),n("text",{attrs:{x:"12",y:"4"}},[t._v(t._s(e))])])]})],2)])},staticRenderFns:[]};var b=n("VU/8")(D,I,!1,function(t){n("efDX"),n("t5SE")},"data-v-387edc7c",null).exports,j={data:function(){return{taskService:p,items:[]}},created:function(){var t=this;this.taskService.getTasksByTemplateId(1).then(function(e){t.items=e})},components:{"timeline-component":b}},T={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",[this._v("Template page")]),this._v(" "),e("div",[this.items.length>0?e("timeline-component",{attrs:{items:this.items,"is-template":!0}}):this._e()],1),this._v(" "),e("b-table",{attrs:{small:"",striped:"",hover:"",items:this.items}})],1)},staticRenderFns:[]},k=n("VU/8")(j,T,!1,null,null,null).exports,C={data:function(){return{taskService:p,items:[]}},created:function(){var t=this;this.taskService.getAllProjects().then(function(e){t.items=e})},methods:{onRowClicked:function(t){this.$router.push("/project/"+t.id)}}},x={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Project list")]),t._v(" "),n("b-table",{attrs:{small:"",hover:"",items:t.items},scopedSlots:t._u([{key:"projectDescr",fn:function(e){return[n("router-link",{attrs:{to:"/project/"+e.item.id}},[t._v(t._s(e.item.projectDescr))])]}}])})],1)},staticRenderFns:[]},w=n("VU/8")(C,x,!1,null,null,null).exports,S=n("woOf"),B=n.n(S),P=n("H9QG"),R={data:function(){return{taskService:p,projectId:this.$route.params.id,project:{},doneItems:[],fields:[{key:"orderNr",sortable:!0},{key:"taskDescr",sortable:!0},{key:"yrBefore",sortable:!0},{key:"activityType",sortable:!0},{key:"calculatedDate",sortable:!0,formatter:function(t){return t.toLocaleString()}}]}},created:function(){var t=this;this.taskService.getTasksByProjectId(this.projectId).then(function(e){t.project=e})},computed:{startDateFormatted:function(){return P.DateTime.fromISO(this.project.startDate).toLocaleString()},items:function(){var t=this;if(!this.project.templateByTemplateId)return[];var e=this.project.templateByTemplateId.tasksByTemplateId.nodes;return e.map(function(e){return B()({},e,{calculatedDate:P.DateTime.fromISO(t.project.startDate).minus({years:e.yrBefore})})})}},methods:{setDone:function(t){if(this.doneItems.includes(t)){var e=this.doneItems.indexOf(t);this.doneItems.splice(e,1)}else this.doneItems.push(t)}},components:{"timeline-component":b}},$={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[this.project.id?[n("h1",[t._v(t._s(this.project.projectDescr))]),t._v(" "),n("h2",[t._v(t._s(this.project.templateByTemplateId.descr))]),t._v(" "),n("h3",[t._v("Start date: "+t._s(this.startDateFormatted))])]:t._e(),t._v(" "),n("div",[n("timeline-component",{attrs:{items:t.items,doneItems:t.doneItems},on:{onSetDone:t.setDone}})],1),t._v(" "),n("b-table",{attrs:{small:"",hover:"",items:t.items,fields:t.fields}})],2)},staticRenderFns:[]},H=n("VU/8")(R,$,!1,null,null,null).exports;a.a.use(c.a);var F=new c.a({mode:"history",routes:[{path:"/",redirect:"/projects"},{path:"/projects",name:"ProjectsPage",component:w,meta:{title:"Projects"}},{path:"/project/:id",name:"ProjectPage",component:H,meta:{title:"Project"}},{path:"/template",name:"TemplatePage",component:k,meta:{title:"Template"}}]});F.beforeEach(function(t,e,n){var a="Colt Viz - "+t.meta.title+(t.params.id?" "+t.params.id:"");document.title=a,n()});var E=F;a.a.config.productionTip=!1,a.a.use(r.a),new a.a({el:"#app",router:E,components:{App:l},template:"<App/>"})},"Tjb/":function(t,e){},eFZR:function(t,e){},efDX:function(t,e){},gj1u:function(t,e){},t5SE:function(t,e){},zj2Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.234e308456852d1df718.js.map